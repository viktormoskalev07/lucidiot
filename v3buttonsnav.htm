<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LucidIoT</title>

		<style type="text/css">
		* {
  margin: 0;
  padding: 0;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
}

body {
  font-family: Arial, Helvetica, sans-serif;
  background-color: #f8f9fa;
  color: #181818;
  margin: 0;
}

.button {
  border: 1px solid #dadce0;
  border-radius: 10px;
  background-color: white;
  margin: 5px 5px;
  padding: 10px 10px;
  text-align: center;
  text-decoration: none;
  display: block;
  font-size: 16px;
}

.button:hover {
  background-color: #dfdfdf;
}

.container {
  margin: 0 auto;
  width: 100%;
  max-width: 1440px;
  padding: 0 15px;
}

header {
  position: relative;
  background-color: white;
  border: 1px solid #dadce0;
  border-radius: 10px;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  padding: 0 20px;
  z-index: 2;
  margin-bottom: 20px;
}

.main-header {
  width: 100%;
  position: relative;
  z-index: 2;
  text-align: center;
  font-size: 35px;
  color: #181818;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 10px;
  -webkit-box-pack: justify;
      -ms-flex-pack: justify;
          justify-content: space-between;
  width: 100%;
}

.main-header h2 {
  font-size: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-flex: 1;
      -ms-flex-positive: 1;
          flex-grow: 1;
  text-align: center;
}

@media (min-width: 375px) {
  .main-header h2 {
    font-size: 1.4rem;
  }
}

@media (min-width: 576px) {
  .main-header h2 {
    font-size: 2rem;
  }
}

.main-nav {
  -webkit-transition: 0.3s;
  transition: 0.3s;
  -webkit-transform: translateX(-100%);
          transform: translateX(-100%);
  width: 100%;
}

.session {
  margin: 20px;
}

nav {
  border: 1px solid #dadce0;
  border-radius: 10px;
  pointer-events: none;
  background: white;
  padding: 16px;
}

nav ul {
  list-style-type: none;
  padding: 0;
  width: 100%;
}

@media (min-width: 480px) {
  nav ul {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
        flex-wrap: wrap;
  }
}

nav li {
  font-weight: 500;
  pointer-events: all;
  -webkit-transition: 0.3s;
  transition: 0.3s;
  margin: 5px;
  padding: 10px;
  border: 1px solid #dadce0;
  border-radius: 10px;
  text-align: center;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  cursor: pointer;
}

@media (min-width: 480px) {
  nav li {
    width: calc(50% - 10px);
  }
}

nav li:hover {
  background-color: #dfdfdf;
}

nav li:active {
  background-color: #acacac;
}

.top-item {
  border-bottom: black solid;
}

.main-icon {
  text-align: center;
  padding: 20px;
}

.main-nav .is-active {
  font-weight: 600;
  background-color: #e8f0fe;
  color: #15c;
}

.main-nav {
  position: absolute;
  left: 0;
}

.main-logo {
  width: 120px;
}

.main-logo img {
  width: 100%;
}

.nav-btn {
  background-color: white;
  height: 40px;
  width: 40px;
  position: relative;
}

.nav-btn__item {
  -webkit-transition: 0.3s;
  transition: 0.3s;
  height: 3px;
  width: 100%;
  background-color: #181818;
  margin-top: calc(25% - 1.5px);
}

.nav-open .main-nav {
  z-index: 1;
  -webkit-transform: none;
          transform: none;
}

.nav-open .nav-btn__item:nth-child(1) {
  -webkit-transform: translateY(11px) rotate(45deg);
          transform: translateY(11px) rotate(45deg);
}

.nav-open .nav-btn__item:nth-child(3) {
  -webkit-transform: translateY(-11px) rotate(-45deg);
          transform: translateY(-11px) rotate(-45deg);
}

.nav-open .nav-btn__item:nth-child(2) {
  -webkit-transform: scale(0);
          transform: scale(0);
  opacity: 0;
}

.nav-open .nav__placeholder {
  background-color: rgba(0, 0, 0, 0.589);
  position: fixed;
  top: 0;
  height: 100%;
  left: 0;
  right: 0;
  -webkit-transition: 0;
  transition: 0;
  z-index: 0;
}

@media (min-width: 768px) {
  .nav__placeholder {
    display: none;
  }
  .main {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
  }
  .main-nav {
    -ms-flex-negative: 0;
        flex-shrink: 0;
    position: static;
    -webkit-transform: none;
            transform: none;
    width: 250px;
  }
  .main-nav li {
    width: 100%;
  }
  .nav {
    padding: 5px;
  }
  .nav-btn {
    opacity: 0;
  }
}

#content {
  -webkit-box-flex: 1;
      -ms-flex-positive: 1;
          flex-grow: 1;
}

.container-box {
  font-size: 10px;
}

@media (min-width: 375px) {
  .container-box {
    font-size: 12px;
  }
}

@media (min-width: 576px) {
  .container-box {
    font-size: 14px;
    padding: 5px;
  }
}

@media (min-width: 768px) {
  .container-box {
    font-size: 16px;
  }
}

@media (min-width: 1200px) {
  .container-box {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
        flex-wrap: wrap;
  }
}

h2 {
  margin: 10px;
}

.table {
  display: table;
  border-collapse: collapse;
}

.tr {
  display: table-row;
}

.td {
  display: table-cell;
}

form {
  display: table;
}

p {
  display: table-row;
}

label {
  display: table-cell;
  padding-right: 20px;
  padding-top: 10px;
}

input {
  display: table-cell;
}

/* Clear floats after the columns */
section:after {
  content: "";
  display: table;
  clear: both;
}

table {
  width: 100%;
}

@media (min-width: 1440px) {
  table {
    table-layout: fixed;
  }
}

th,
td {
  text-align: center;
}

th,
td {
  border: 1px solid #dadce0;
  border-collapse: collapse;
  padding: 5px;
}

.box-topic {
  -ms-flex-preferred-size: 100%;
      flex-basis: 100%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
}

.box-1 {
  border-color: #dadce0;
  padding: 10px;
  -ms-flex-preferred-size: 50%;
      flex-basis: 50%;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  border-style: solid;
}

.box-12 {
  padding: 10px;
  -ms-flex-preferred-size: 50%;
      flex-basis: 50%;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  border-style: solid;
}

.box-13 {
  padding: 10px;
  -ms-flex-preferred-size: 33%;
      flex-basis: 33%;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  border-style: solid;
}

.box-14 {
  padding: 10px;
  -ms-flex-preferred-size: 25%;
      flex-basis: 25%;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  border-style: solid;
}

.box-16 {
  padding: 10px;
  -ms-flex-preferred-size: 16%;
      flex-basis: 16%;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  border-style: solid;
}

.box-title {
  padding: 10px;
  margin: 5px;
  -ms-flex-preferred-size: 100%;
      flex-basis: 100%;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  border-style: solid;
}

.box-a {
  overflow: auto;
  padding: 10px;
  margin: 10px 0;
  -ms-flex-preferred-size: calc(50% - 20px);
      flex-basis: calc(50% - 20px);
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  border: 1px solid #dadce0;
  border-radius: 10px;
  background-color: white;
}

@media (min-width: 576px) {
  .box-a {
    margin: 15px 10px;
  }
}

.box-b {
  border: 1px solid #dadce0;
  border-radius: 10px;
  padding: 10px;
  margin: 10px;
  -ms-flex-preferred-size: 40%;
      flex-basis: 40%;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  -webkit-box-shadow: 0px 0px 2px 1px #dadce0;
          box-shadow: 0px 0px 2px 1px #dadce0;
}

.box-full {
  margin-top: 20px;
  margin-left: 5px;
  -ms-flex-preferred-size: 100%;
      flex-basis: 100%;
  padding: 10px;
}

.box-full-sub {
  -ms-flex-preferred-size: 100%;
      flex-basis: 100%;
  padding: 0;
  margin: 0;
  border-top: solid;
  padding-top: 10px;
}

.box-2 {
  -ms-flex-preferred-size: 50%;
      flex-basis: 50%;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  padding: 0px;
  border-style: dashed;
}

.box-5050 {
  -ms-flex-preferred-size: 40%;
      flex-basis: 40%;
  padding: 0px;
  margin: 10px;
  border-style: solid;
  border-color: black;
}

.digState {
  width: 40px;
  height: 40px;
  border-radius: 20px;
  -moz-border-radius: 20px;
  -webkit-border-radius: 20px;
}
/*# sourceMappingURL=main.css.map */
		</style>
	 
 
	</head>

	<script>

		const injectHead = (function(i,n,j,e,c,t,s){t=n.createElement(j),s=n.getElementsByTagName(j)[0];t.appendChild(n.createTextNode(e.text));t.onload=c(e);s?s.parentNode.insertBefore(t,s):n.head.appendChild(t)});

		var selectedSlot;
		var chkLoginTimer;
		var acc;

		var pgNet, pgSysInfo, pgClk, pgHttp, pgMqtt, pgMb, pgFtp, pgSmtp, pgJson, pgFrm, pgLog, pgAcc, pgIoCfg, pgIoVal;
		var jsNet, jsSysInfo, jsClk, jsHttp, jsMqtt, jsMb, jsFtp, jsJson, jsFrm, jsLog, jsAcc, jsIoCfg, jsIoVal;
		
		const cfgDI = 0,
    		cfgDO = 1,
    		cfgAI = 2,
    		cfgAO = 3,
    		cfgRI = 4;

		const vtDI1 = 0,
			vtVOS4 = 0x1D,
			vtCUS4 = 0x23,
			vtTMS4 = 0x41,
			vtRMU4 = 0x51;

		const accAdmin = 0x01,
			accFtpRw = 0x10,
			accIo = 0x40,
			accIoCfg = 0x80,
			accEn = 0x8000;
		
		var cDI4 = "0",
			cDI8 = "16",
			cDO4 = "4096",
			cDO8 = "4112",
			cAI4 = "256",
			cAO4 = "4352",
			cRI4 = "2560",
			cRI8 = "2576";

		var tV = 0,
			tC = 1;


		var fmt = {
			0 : "Auto",
			1 : "Digital On / Off",
			2 : "Digital 1 / 0",
			3 : "Digital true / false",
			10 : "Numeric",
			30 : "Voltage (µV) Integer",
			31 : "Voltage (V) Decimal",
			32 : "Voltage (V) Decimal Prec 0",
			33 : "Voltage (V) Decimal Prec 1",
			34 : "Voltage (V) Decimal Prec 2",
			35 : "Voltage (V) Decimal Prec 3",
			40 : "Current (µA) Integer",
			41 : "Current (mA) Decimal",
			42 : "Current (mA) Decimal Prec 0",
			43 : "Current (mA) Decimal Prec 1",
			44 : "Current (mA) Decimal Prec 2",
			45 : "Current (mA) Decimal Prec 3"
		};

		function fmtGetIdByIdx(idx) {
			var o = Object.keys(fmt);
			return o[idx];
		}

		function fmtGetIdxById(id) {
			var o = Object.keys(fmt);
			for (i = 0; i < o.length; i++) {
				if (o[i] == id)
					return i;
			}
			return 0;
		}

		function fmtStrGet() {
			let s = "";
			for(var k in fmt) {
				s += '<option>' + fmt[k] + '</option>';
			}
			return s;
		}

		var vId = {
			0 : "Ch 0",
			1 : "Ch 1",
			2 : "Ch 2",
			3 : "Ch 3",
			4 : "Ch 4",
			5 : "Ch 5",
			6 : "Ch 6",
			7 : "Ch 7",
			8 : "Ch 8",
			9 : "Ch 9",
			10 : "Ch 10",
			11 : "Ch 11",
			12 : "Ch 12",
			13 : "Ch 13",
			14 : "Ch 14",
			15 : "Ch 15",
			0x1000 : "System Time"
		};


		function vIdGetIdByIdx(idx) {
			var o = Object.keys(vId);
			return o[idx];
		}

		function vIdGetIdxById(id) {
			var o = Object.keys(vId);
			for (i = 0; i < o.length; i++) {
				if (o[i] == id)
					return i;
			}
			return 0;
		}

		function vIdStrGet() {
			let s = "";
			for(var k in vId) {
				s += '<option>' + vId[k] + '</option>';
			}
			return s;
		}

		function vIdStrGet() {
			let s = "";
			for(var k in vId) {
				s += '<option>' + vId[k] + '</option>';
			}
			return s;
		}

		var doMode = {
			0 : "Inactive",
			1 : "Reflect",
			8 : "OnOff",
			10 : "DutyCycle"
		};

		function doModeGetIdByIdx(idx) {
			return Object.keys(doMode)[idx];
		}

		function doModeGetIdxById(id) {
			var o = Object.keys(doMode);
			for (var i = 0; i < o.length; i++) {
				if (o[i] == id)
					return i;
			}
			return 0;
		}
		

		function doModeStrGet() {
			let s = "";
			for (var k in doMode) {
				s += '<option>' + doMode[k] + '</option>';
			}
			return s;
		}

		var diMode = {
			0 : "Inactive",
			1 : "Reflect",
			0x10 : "Rising Edge",
			0x11 : "Falling Edge",
			0x20 : "Counting"
		};

		function diModeGetIdByIdx(idx) {
			return Object.keys(diMode)[idx];
		}

		function diModeGetIdxById() {
			var o = Object.keys(diMode);
			for (var i = 0; i < o.length; i++) {
				if (o[i] == id)
					return i;
			}
			return 0;
		}

		function diModeStrGet() {
			let s = "";
			for (var k in diMode) {
				s += '<option>' + diMode[k] + '</option>';
			}
			return s;
		}

		var stdMode = {
			0 : "Inactive",
			1 : "Standard"
		};

		function stdModeGetIdByIdx(idx) {
			return Object.keys(stdMode)[idx];
		}

		function stdModeGetIdxById(id) {
			var o = Object.keys(stdMode);
			for (var i = 0; i < o.length; i++) {
				if (o[i] == id)
					return i;
			}
			return 0;
		}

		function stdModeStrGet() {
			let s = "";
			for (var k in stdMode) {
				s += '<option>' + stdMode[k] + '</option>';
			}
			return s;
		}

		var tz = [
			{id: 0, z: "CET/CEST"},
			{id: 1, z: "CET"}];
		
		function tzOptAdd(eId) {
			let i;
			let c;
			for (i = 0; i < tz.length; i++) {
				c = document.createElement("option");
				c.text = tz[i].z;
				document.getElementById(eId).options.add(c);
			}
		}

		function tzIdGet(idx) {
			return tz[idx].id;
		}

		function tzIdxGet(id) {
			let i;
			for (i = 0; i < tz.length; i++) {
				if (id == tz[i].id)
					return i;
				}
			return 0;
		}

		async function fetchHtmlAsText(url) {
			return await (await fetch(url)).text();
		}

		function eGetById(id) {
     		return document.getElementById(id);
    }

		function hS(id, h) {
			eGetById(id).innerHTML = h;
		}

		function vS(id, v) {
			eGetById(id).value = v;
		}

		function vG(id){
			return eGetById(id).value;
		}

		function cS(id, v) {
			eGetById(id).checked = v;
		}

		function cG(id) {
			return eGetById(id).checked;
		}

		function tcS(id, c) {
			eGetById(id).style.color = c;
		}

		function siS(id, v) {
			eGetById(id).selectedIndex = v;
		}

		function siG(id) {
			return eGetById(id).selectedIndex;
		}

		function dS(id, v) {
			eGetById(id).style.display = v;
		}

		function valC(id) {
			return eGetById(id).checkValidity();
		}

		function sIdG() {
			let sId = document.cookie.split('=');
			return parseInt(sId[1]);
		}

		function pI(v) {
			return parseInt(v);
		}

		function resClr(id)	{
			tcS(id, "initial")
			hS(id, "");
		}

		function resErr(id, v) {
			tcS(id, "red");
			hS(id, "ERROR: " + v);
		}

		function resExcp(id, v) {
			tcS(id, "red");
			hS(id, "EXCEPT: " +v);
		}

		function resOk(id, v) {
			tcS(id, "green");
			hS(id, v);
		}

		function mStat(rq, rs) {
			return (rq.Cmd + ' Status : ' + rs.Status);
		}

		function mExcept(rq, e) {
			return (rq.Cmd + ' Exception : ' + e);
		}

		const fetchInject = function (inputs, promise) {
  			//if (!arguments.length) return Promise.reject(new ReferenceError("Failed to execute 'fetchInject': 1 argument required but only 0 present."))
  			//if (arguments[0] && arguments[0].constructor !== Array) return Promise.reject(new TypeError("Failed to execute 'fetchInject': argument 1 must be of type 'Array'."))
  			//if (arguments[1] && arguments[1].constructor !== Promise) return Promise.reject(new TypeError("Failed to execute 'fetchInject': argument 2 must be of type 'Promise'."))

  			const resources = []
  			const deferreds = promise ? [].concat(promise) : []
  			const thenables = []

			inputs.forEach(input => deferreds.push(window.fetch(input).then(res => {
				return [res.clone().text(), res.blob()]
			}).then(promises => {
				return Promise.all(promises).then(resolved => {
					resources.push({ text: resolved[0], blob: resolved[1] })
				})
			})
			))

			return Promise.all(deferreds).then(() => {
				resources.forEach(resource => {
				thenables.push({
					then: resolve => {
					resource.blob.type.includes('text/css')
						? injectHead(window, document, 'style', resource, resolve)
						: injectHead(window, document, 'script', resource, resolve)
					}
			})
		})
		return Promise.all(thenables)
  		})
		}
 
		function sReq(j) {
			var xhttp = new XMLHttpRequest();
			var url = '/cmd';
			var params ='value=';
			var request = JSON.stringify(j);

			xhttp.open("POST", url, true);
			xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			params += request;
			xhttp.send(params);
			return xhttp;
		}

		async function r(req) {
			return new Promise(function(resolve, reject) {
				let xhttp = sReq(req);
				xhttp.onreadystatechange = function () {
					if (this.readyState == 4) {
						if (this.status == 200)	{
							try {
								let rsp = JSON.parse(this.responseText);
								resolve(rsp);
							} catch (e) {
								console.log(this.responseText);
								reject("EXCEPT: " + e);
							}
						} else {
							reject("HTTP Status: " + this.status);
						}
					}
				}
			});
		}

		async function rqp(rq, fupd) {
			return new Promise(async(res, rej) => {
				await r(rq).then((j) => {
					if (j.Status == "OK") {
						if (fupd)
							fupd(j);
						res();
					} else {
						rej(mStat(rq, j));
					}
				}).catch((m) => {
					rej(mExcept(rq, m));
				})
			});
		}

		function ofstGet(slot) {
			let c;
			if (slot == 1)
				c = sessionStorage.getItem("c0");
			else
				return 0;

			if ((c == "0")	||
					(c == "4096") ||
					(c == "256") ||
					(c == "4352") ||
					(c == "2560"))
				return 4;
			else if ((c == "16") ||
					(c == "4112") ||
					(c == "2576"))
				return 8;
			return 0;
		}

		function classGet(slot)
		{
			if (slot == 1)
				return sessionStorage.getItem("c1");
			else
				return sessionStorage.getItem("c0");
		}

		function sysIdStore(j) {
			if (j.Slots.length) {
				sessionStorage.setItem("c0", j.Slots[0].Class);
				sessionStorage.setItem("t0", j.Slots[0].Type);
				sessionStorage.setItem("cn0", j.Slots[0].ClassName);
				sessionStorage.setItem("tn0", j.Slots[0].TypeName);
			}
			if (j.Slots.length > 1) {
				sessionStorage.setItem("c1", j.Slots[1].Class);
				sessionStorage.setItem("t1", j.Slots[1].Type);
				sessionStorage.setItem("cn1", j.Slots[1].ClassName);
				sessionStorage.setItem("tn1", j.Slots[1].TypeName);
			}
		}

		async function sysIdGet(upd) {
			let rq = {Cmd:"SysIdGet",
						SessionId:sIdG()};
			
			return new Promise(async(res, rej) => {
				await r(rq).then((j) => {
				if (j.Status == "OK") {
					sysIdStore(j);
					if (upd)
						sysIdUpd(j);
					res();
				} else {
					rej(mStat(rq, j));
				}
				}).catch((m) => {
					rej(mExcept(rq, m));
				});
			});
		}

		// SMTP

		function smtpCfgUpd(j) {

		}

		function smtpCfgSet() {

		}

		async function smtpCfgGet() {

		}



		// ACCOUNT
		function accVisibleSet(acc) {
			dS("btSysInfo", "block");

			if (sessionStorage.getItem("Mode") != 0) {
				dS("btSec", "block");
				return;
			}

			if ((acc & accAdmin) || (acc & accIoCfg)) {
				if (sessionStorage.getItem("c0") != null) {
					dS("btIoCfg0", "block");
					dS("btIoVal0", "block");
				}

				if (sessionStorage.getItem("c1") != null) {
					dS("btIoCfg1", "block");
					dS("btIoVal1", "block");
				}
			}

			if ((acc & accAdmin) || (acc & accIo)) {
				if (sessionStorage.getItem("c0") != null) {
					dS("btIoVal0", "block");
				}
	
				if (sessionStorage.getItem("c1") != null) {
					dS("btIoVal1", "block");
				}
			}

			if (acc & accAdmin) {
				dS("btNet", "block");
				dS("btClk", "block");
				dS("btHttp", "block");
				dS("btMqtt", "block");
				dS("btMb", "block");
				dS("btFtp", "block");
				//dS("btSmtp", "block");
				dS("btJson", "block");
				dS("btFrm", "block");
				dS("btLog", "block");
				dS("btAcc", "block");
			}

			if (sessionStorage.getItem("ld") == null) {
				if (acc & accAdmin)
					sessionStorage.setItem("ld", "sysInfo");
				else
					sessionStorage.setItem("ld", "ioVal0");
			}
		}

		// async function accGetByUser(name) {
		// 	let rq = {Cmd:"AccGet", SessionId:sIdG(), Name:name};

		// 	return new Promise(async (res, rej) => {
		// 		await r(rq).then((j) => {
		// 			if (j.Status == "OK")
		// 				res(j.Access);
		// 			else
		// 				rej(mStat(rq, j));
		// 		}).catch((m) => {
		// 			rej(mExcept(rq, m));
		// 		})
		// 	});
		// }

		async function accLoginTimerFnc() {
			let rq = {Cmd:"AccLogCheck",
				SessionId:sIdG(),
				Heartbeat:0};
				
			await r(rq).then((j) => {
				if (j.Status != "OK") {
					console.log(mStat(rq, j));
					window.location.href = 'logout.htm';
				}
			}).catch((m) => {
				console.log(mExcept(rq, m));
				window.location.href = 'logout.htm';
			})
		}

		function accLoginCheck()
		{
			accLoginTimerFnc();
			chkLoginTimer = setInterval(accLoginTimerFnc, 1000);

			var e = document.cookie.split('=');
			if (e.length == 2) {
				hS("sessionId", e[1]);
			} else {
				hS("sessionId", "COOKIE ERROR");
			}
		}

		async function accLogout()
		{
			let rq = {Cmd:"AccLogout",
				SessionId:sIdG()};
			await r(rq).then((j) => {
				if (j.Status == "OK")
					window.location.href = 'logout.htm';
				else {
					console.log(mStat(rq, j));
					window.location.href = 'logout.htm';
				}
			}).catch((m) => {
				console.log(mExcept(rq, m));
				window.location.href = 'logout.htm';
			})
		}


		async function netLd(){
			if (!pgNet)
				pgNet = await fetchHtmlAsText("net.htm")
			hS("content", pgNet);

			if (!jsNet) {
				await fetchInject(["net.js"])
				jsNet = 1;
			}

			sessionStorage.setItem("ld", "net");

			await netInit().then(() => {
			}).catch((m) => {
				alert(m);
			});
		}

		async function sysInfoLd(){
			if (!pgSysInfo)
				pgSysInfo = await fetchHtmlAsText("sysinfo.htm");
			hS("content", pgSysInfo);

			if (!jsSysInfo) {
				await fetchInject(["sysinfo.js"])
				jsSysInfo = 1;
			}
			sessionStorage.setItem("ld", "sysInfo");
			
			await sysInfoInit().then(() => {
			}).catch((m) => {
				alert(m);
			});
		}

		async function clkLd(){

			if (!pgClk)
				pgClk = await fetchHtmlAsText("clk.htm")
			hS("content", pgClk);

			if (!jsClk) {
				await fetchInject(["clk.js"]);
				jsClk = 1;
			}
			sessionStorage.setItem("ld", "clk");
			tzOptAdd("clkTz");
			
			await clkInit().then(() => {
			}).catch((m) => {
				alert(m);
			});
		}

		async function httpLd(){

			if (!pgHttp)
				pgHttp = await fetchHtmlAsText("http.htm")
			hS("content", pgHttp);

			if (!jsHttp) {
				await fetchInject(["http.js"]);
				jsHttp = 1;
			}
			sessionStorage.setItem("ld", "http");

			await httpInit().then(() => {
			}).catch((m) => {
				alert(m);
			});
			await httpCfgGet();
		}

		async function mqttLd(){
			if (!pgMqtt)
				pgMqtt = await fetchHtmlAsText("mqtt.htm")
			hS("content", pgMqtt);

			if (!jsMqtt) {
				await fetchInject(["mqtt.js"]);
				jsMqtt = 1;
			}
			sessionStorage.setItem("ld", "mqtt");
			
			await mqttInit().then(() => {
			}).catch((m) => {
				alert(m);
			});
		}

		async function ftpLd(){
			if (!pgFtp)
				pgFtp = await fetchHtmlAsText("ftp.htm")
			hS("content", pgFtp);

			if (!jsFtp) {
				await fetchInject(["ftp.js"]);
				jsFtp = 1;
			}
			sessionStorage.setItem("ld", "ftp");

			await ftpInit().then(() => {
			}).catch((m) => {
				alert(m);
			});
		}

		async function mbLd(){
			if (!pgMb)
				pgMb = await fetchHtmlAsText("mb.htm");

			if (!jsMb) {
				await fetchInject(["mb.js"]);
				jsMb = 1;
			}

			hS("content", pgMb);
			sessionStorage.setItem("ld", "mb");

			await mbInit().then(() => {
			}).catch((m) => {
				alert(m);
			});
		}

		async function jsonLd(){
			if (!pgJson)
				pgJson = await fetchHtmlAsText("json.htm");

			if (!jsJson) {
				await fetchInject(["json.js"]);
				jsJson = 1;
			}

			hS("content", pgJson);
			sessionStorage.setItem("ld", "json");

			await jsonInit().then(() => {
			}).catch((m) => {
				alert(m);
			});
		}

		async function frmLd(){
			if (!pgFrm)
				pgFrm = await fetchHtmlAsText("frm.htm");

			if (!jsFrm) {
				await fetchInject(["frm.js"]);
				jsFrm = 1;
			}
			hS("content", pgFrm);
			sessionStorage.setItem("ld", "frm");

			await frameInit().then(() => {
			}).catch((m) => {
				alert(m);
			});
		}

		async function accLd() {
			if (!pgAcc)
				pgAcc = await fetchHtmlAsText("acc.htm");

			if (!jsAcc) {
				await fetchInject(["acc.js"]);
				jsAcc = 1;
			}
			hS("content", pgAcc);
			sessionStorage.setItem("ld", "acc");

			await accInit().then(() => {
			}).catch((m) => {
				alert(m);
			});
		}
		

		async function logLd(){

			console.log("Test Log Enter");
			if (!pgLog)
				pgLog = await fetchHtmlAsText("log.htm");
			hS("content", pgLog);

			if (!jsLog) {
				await fetchInject(["log.js"]);
				jsLog = 1;
			}
			
			sessionStorage.setItem("ld", "log");

			await logInit().then(() => {
			}).catch((m) => {
				alert(m);
			});
		}

		async function ioLd(slot){
			let c;
			selectedSlot = slot;

			if (!pgIoCfg)
				pgIoCfg = await fetchHtmlAsText("io.htm");
			hS("content", pgIoCfg);

			if (!jsIoCfg) {
				await fetchInject(["io.js"]);
				jsIoCfg = 1;
			}
			sessionStorage.setItem("ld", "io" + slot);

			if (slot == 1) {
				c = sessionStorage.getItem("c1");
			} else
				c = sessionStorage.getItem("c0");

			await ioCfgInit(slot, c).then(() => {
			}).catch((m) => {
				alert(m);
			});
		}

		async function ioValLd(slot) {
			let c;
			selectedSlot = slot;

			if (!pgIoVal)
				pgIoVal = await fetchHtmlAsText("ioval.htm");
			hS("content", pgIoVal);

			if (!jsIoVal) {
				await fetchInject(["ioval.js"]);
				jsIoVal = 1;
			}
			sessionStorage.setItem("ld", "ioVal" + slot);
			
			if (slot == 1) {
				c = sessionStorage.getItem("c1");
			} else
				c = sessionStorage.getItem("c0");

			await ioValInit(slot, c).then(() => {
			}).catch((m) => {
				alert(m);
			});
		}

	</script>

	<body>
	 	<div class="container">
	
			<header  >
				
					<div class="main-header">
	
							<div class="main-logo">
								<img src="
										data:image/png;base64,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" />
							</div>
										<h2>LucidIoT</h2>
										<div   class=" nav-btn">
											<div class="nav-btn__item"></div>
											<div class="nav-btn__item"></div>
											<div class="nav-btn__item"></div>
										</div>	
															
					</div>		
			</header>	
			 
		</div>
	 
						
		<main class="container main">
					<div class="nav__placeholder"></div>

							<div class="main-nav">
								
									<!-- <nav>
										<ul>
											<li id="btSysInfo" style="display:none">System Info</li>
											<li id="btNet" style="display:none">Network</li>
											<li id="btClk" style="display:none">Date & Time</li>
											<li id="btHttp" style="display:none">HTTP Server</li>
											<li id="btMqtt" style="display:none">MQTT Client</li>
											<li id="btMb" style="display:none">Modbus/TCP Server</li>
											<li id="btFtp" style="display:none">FTP Server</li> -->
											<!-- <li id="btSmtp" style="display:none">SMTP</li> -->
											<!-- <li id="btJson" style="display:none">JSON Interface</li>
											<li id="btFrm" style="display:none">Frame Interface</li>
											<li id="btLog" style="display:none">Logging</li> 
											<li id="btAcc" style="display:none">User Accounts</li>
											<li id="btSec" style="display:none">Security</li>
											<li id="btIoCfg0" style="display:none">IO Slot 0 Config</li>
											<li id="btIoVal0" style="display:none">IO Slot 0 Value</li>
											<li id="btIoCfg1" style="display:none">IO Slot 1 Config</li>
											<li id="btIoVal1" style="display:none">IO Slot 1 Value</li>
											<li id="btLogout">Logout</li>
										</ul>
									</nav> -->
									<nav class="nav">
										<ul>
											<li id="btSysInfo" class="is-active" >System Info</li> 
											<li id="btNet" >Network</li>
											<li id="btClk" >Date & Time</li>
											<li id="btHttp" >HTTP Server</li>
											<li id="btMqtt" >MQTT Client</li>
											<li id="btMb" >Modbus/TCP Server</li>
											<li id="btFtp" >FTP Server</li>
											<!-- <li id="btSmtp" >SMTP</li> -->
											<li id="btJson" >JSON Interface</li>
											<li id="btFrm" >Frame Interface</li>
											<li id="btLog" >Logging</li> 
											<li id="btAcc" >User Accounts</li>
											<!-- <li id="btSec" >Security</li> -->
											<li id="btIoCfg0" >IO Slot 0 Config</li>
											<li id="btIoVal0" >IO Slot 0 Value</li>
											<li id="btIoCfg1" >IO Slot 1 Config</li>
											<li id="btIoVal1" >IO Slot 1 Value</li>
											<li id="btLogout">Logout</li>
										</ul>
										<div class="session">
											<p>Session ID</p>
											<p id="sessionId">ID</p>
										</div>
									</nav>
							</div>
						
							<div id="content">
								<div class="container-box ">
									<div class="box-full">
										<h1>System Overview</h1>
									</div>
						
									<div class="box-a">
										<h2>Memory</h2>
										<table>
											<tr>
												<td>Uptime [sec]</td>
												<td><p id="sysUp"></p></td>
											</tr>
											<tr>
												<td>Mem Free [kB]</td>
												<td><p id="sysMf"></p></td>
											</tr>
											<tr>
												<td>Mem Free Min [kB]</td>
												<td><p id="sysMm"></p></td>
											</tr>
											<tr>
												<td>Mem Error</td>
												<td><p id="sysMe"></p></td>
											</tr>
											<tr>
												<td>XMem Free [kB]</td>
												<td><p id="sysXf"></p></td>
											</tr>
											<tr>
												<td>XMem Free Min [kB]</td>
												<td><p id="sysXm"></p></td>
											</tr>
											<tr>
												<td>XMem Err</td>
												<td><p id="sysXe"></p></td>
											</tr>
											<tr>
												<td>Intern Mem Total [kB]</td>
												<td><p id="sysCt"></p></td>
											</tr>
											<tr>
												<td>Intern Mem Free [kB]</td>
												<td><p id="sysCf"></p></td>
											</tr>
										</table>
									</div>
						
									<div class="box-a">
										<h2>System Identification</h2>
										<table>
											<tr>
												<td>Serial Number</td>
												<td><p id="sysSnr"></p></td>
											</tr>
											<tr>
												<td>Hardware Revision</td>
												<td><p id="sysHwr"></p></td>
											</tr>
											<tr>
												<td>Firmware Revision</td>
												<td><p id="sysFwr"></p></td>
											</tr>
										</table>
						
										<div class="box-b">
											<h2>Slot 0</h2>
											<table>
												<tr>
													<td>Class</td>
													<td><p id="sysCl0"></p></td>
												</tr>
												<tr>
													<td>Type</td>
													<td><p id="sysTy0"></p></td>
												</tr>
												<tr>
													<td>Revision</td>
													<td><p id="sysRv0"></p></td>
												</tr>
											</table>
										</div>
						
										<div class="box-b">
											<h2>Slot 1</h2>
											<table>
												<tr>
													<td>Class</td>
													<td><p id="sysCl1"></p></td>
												</tr>
												<tr>
													<td>Type</td>
													<td><p id="sysTy1"></p></td>
												</tr>
												<tr>
													<td>Revision</td>
													<td><p id="sysRv1"></p></td>
												</tr>
											</table>
										</div>
						
									</div>
						
									<div class="box-a">
										<h2>Protocol Stack Memory</h2>
										<table>
											<tr>
												<th></th>
												<th>Available</th>
												<th>Used</th>
												<th>Max</th>
												<th>Error</th>
												<th>Illegal</th>
											</tr>
											<tr>
												<th>Buffer</th>
												<td><p id="tB"></p></td>
												<td><p id="uB"></p></td>
												<td><p id="mB"></p></td>
												<td><p id="eB"></p></td>
												<td><p id="iB"></p></td>
											</tr>
											<tr>
												<th>Pool</th>
												<td><p id="tP"></p></td>
												<td><p id="uP"></p></td>
												<td><p id="mP"></p></td>
												<td><p id="eP"></p></td>
												<td><p id="iP"></p></td>
											</tr>
											<tr>
												<th>Timer</th>
												<td><p id="tT"></p></td>
												<td><p id="uT"></p></td>
												<td><p id="mT"></p></td>
												<td><p id="eT"></p></td>
												<td><p id="iT"></p></td>
											</tr>
											<tr>
												<th>TCP Msg</th>
												<td><p id="tTM"></p></td>
												<td><p id="uTM"></p></td>
												<td><p id="mTM"></p></td>
												<td><p id="eTM"></p></td>
												<td><p id="iTM"></p></td>
											</tr>
											<tr>
												<th>TCP PCB</th>
												<td><p id="tTP"></p></td>
												<td><p id="uTP"></p></td>
												<td><p id="mTP"></p></td>
												<td><p id="eTP"></p></td>
												<td><p id="iTP"></p></td>
											<tr>
												<th>TCP Listen PCB</th>
												<td><p id="tTPL"></p></td>
												<td><p id="uTPL"></p></td>
												<td><p id="mTPL"></p></td>
												<td><p id="eTPL"></p></td>
												<td><p id="iTPL"></p></td>
											</tr>
											<tr>
												<th>Alt TCP PCB</th>
												<td><p id="tATP"></p></td>
												<td><p id="uATP"></p></td>
												<td><p id="mATP"></p></td>
												<td><p id="eATP"></p></td>
												<td><p id="iATP"></p></td>
											</tr>
											<tr>
												<th>UDP PCB</th>
												<td><p id="tUP"></p></td>
												<td><p id="uUP"></p></td>
												<td><p id="mUP"></p></td>
												<td><p id="eUP"></p></td>
												<td><p id="iUP"></p></td>
											</tr>
											<tr>
												<th>Netconn Buffer </th>
												<td><p id="tNB"></p></td>
												<td><p id="uNB"></p></td>
												<td><p id="mNB"></p></td>
												<td><p id="eNB"></p></td>
												<td><p id="iNB"></p></td>
											</tr>
											<tr>
												<th>Netconn</th>
												<td><p id="tN"></p></td>
												<td><p id="uN"></p></td>
												<td><p id="mN"></p></td>
												<td><p id="eN"></p></td>
												<td><p id="iN"></p></td>
											</tr>
											<tr>
												<th>TCP Segment</th>
												<td><p id="tTS"></p></td>
												<td><p id="uTS"></p></td>
												<td><p id="mTS"></p></td>
												<td><p id="eTS"></p></td>
												<td><p id="iTS"></p></td>
											</tr>
											<tr>
												<th>Fragment</th>
												<td><p id="tF"></p></td>
												<td><p id="uF"></p></td>
												<td><p id="mF"></p></td>
												<td><p id="eF"></p></td>
												<td><p id="iF"></p></td>
											</tr>
											<tr>
												<th>IGMP</th>
												<td><p id="tI"></p></td>
												<td><p id="uI"></p></td>
												<td><p id="mI"></p></td>
												<td><p id="eI"></p></td>
												<td><p id="iI"></p></td>
											</tr> 
											<tr>
												<th>Reasseble</th>
												<td><p id="tR"></p></td>
												<td><p id="uR"></p></td>
												<td><p id="mR"></p></td>
												<td><p id="eR"></p></td>
												<td><p id="iR"></p></td>
											</tr> 
						
										</table>
									</div>
						
									<div class="box-a">
									<h2>Service and Module State</h2>
									<table>
										<tr>
											<th></th>
											<th>Service State</th>
											<th>Module State</th>
											<th>Reset</th>
										</tr>
										<tr>
											<th>Network</th>
											<td><p id="netSvc"></p></td>
											<td><p id="netMod"></p></td>
											<td><p id="netRst"></p></td>
										</tr>
										<tr>
											<th>Clock</th>
											<td><p id="clkSvc"></p></td>
											<td><p id="clkMod"></p></td>
											<td><p id="clkRst"></p></td>
										</tr>
										<tr>
											<th>Command</th>
											<td><p id="cmdSvc"></p></td>
											<td><p id="cmdMod"></p></td>
											<td><p id="cmdRst"></p></td>
										</tr>
										<tr>
											<th>File</th>
											<td><p id="fileSvc"></p></td>
											<td><p id="fileMod"></p></td>
											<td><p id="fileRst"></p></td>
										</tr>
										<tr>
											<th>Data Log</th>
											<td><p id="logSvc"></p></td>
											<td><p id="logMod"></p></td>
											<td><p id="logRst"></p></td>
										</tr>
										<tr>
											<th>Sys Log</th>
											<td><p id="slogSvc"></p></td>
											<td><p id="slogMod"></p></td>
											<td><p id="slogRst"></p></td>
										</tr>
										<tr>
											<th>JSON</th>
											<td><p id="jsonSvc"></p></td>
											<td><p id="jsonMod"></p></td>
											<td><p id="jsonRst"></p></td>
										</tr>
										<tr>
											<th>Frame</th>
											<td><p id="frmSvc"></p></td>
											<td><p id="frmMod"></p></td>
											<td><p id="frmRst"></p></td>
										</tr>                
										<tr>
											<th>FTP Server</th>
											<td><p id="ftpSvc"></p></td>
											<td><p id="ftpMod"></p></td>
											<td><p id="ftpRst"></p></td>
										</tr>
										<tr>
											<th>HTTP Server</th>
											<td><p id="httpSvc"></p></td>
											<td><p id="httpMod"></p></td>
											<td><p id="httpRst"></p></td>
										</tr>
										<tr>
											<th>MQTT Client</th>
											<td><p id="mqttSvc"></p></td>
											<td><p id="mqttMod"></p></td>
											<td><p id="mqttRst"></p></td>
										</tr>
										<tr>
											<th>Modbus/TCP Server</th>
											<td><p id="mbSvc"></p></td>
											<td><p id="mbMod"></p></td>
											<td><p id="mbRst"></p></td>
										</tr>
									</table>
									</div>
						
									<div class="box-a">
										<p id="sysInfoRes"></p>
									</div>
						
								</div>
							</div>

		</main>
	</body>


<script>
window.addEventListener('load', function(){
	const nav =document.querySelector("nav");
	const navitem = nav.querySelectorAll('li');
	nav.onclick=navClose;
	document.querySelector(".nav__placeholder").onclick=navClose;
			function navClose(event){ 
				if (event.target.tagName == "LI"){
					for(let i=0 ; i< navitem.length ; i++){
						navitem[i].classList.remove('is-active');
					}
				 	event.target.classList.add('is-active');
				}
				document.querySelector("body").classList.remove('nav-open');
			}
		document.querySelector(".nav-btn").addEventListener('click', function(){
		document.querySelector("body").classList.toggle('nav-open');
			})
})

</script>
	</body>

	<script>

		
		function btnEvAdd(id, fnc) {
			eGetById(id).addEventListener("click", fnc);			
		}

		btnEvAdd("btNet", async () => {await netLd()});
		btnEvAdd("btSysInfo", async () => {await sysInfoLd()});
		btnEvAdd("btClk", clkLd);
		btnEvAdd("btHttp", httpLd);
		btnEvAdd("btMqtt", mqttLd);
		btnEvAdd("btMb", mbLd);
		btnEvAdd("btFtp", ftpLd);
		//btnEvAdd("btSmtp", smtpLd);
		btnEvAdd("btJson", jsonLd);
		btnEvAdd("btFrm", frmLd);
		btnEvAdd("btLog", logLd);
		btnEvAdd("btAcc", accLd);
		btnEvAdd("btIoCfg0", function() {ioLd(0);});
		btnEvAdd("btIoVal0", function() {ioValLd(0);});
		btnEvAdd("btIoCfg1", function() {ioLd(1);});
		btnEvAdd("btIoVal1", function() {ioValLd(1);});
		btnEvAdd("btLogout", accLogout);

		window.onload = async function() {
			let ld, tm;
			
			await sysIdGet(0).then(() => {
			}).catch((m) =>{
				tm = m;
			})

			if (tm) {
				tm = null;
				// Overwrite
				//sessionStorage.setItem("user", "");
				//sessionStorage.setItem("c0", cRI4);
				sessionStorage.setItem("c1", cAO4);
				//sessionStorage.setItem("c1", cRI8);
				acc = 0xFFFF;
			}

			if (!tm) {
				await accGetByUser(sessionStorage.getItem("user")).then((tacc) => {
				acc = tacc;				
				}).catch((m) => {
					alert(m);
				});
			}
			
			accVisibleSet(acc);
			
			accLoginCheck();

			ld = sessionStorage.getItem("ld");

			if (ld == "net")
				netLd();
			else if (ld == "sysInfo")
				sysInfoLd();
			else if (ld == "clk")
				clkLd();
			else if (ld == "http")
				httpLd();
			else if (ld == "mqtt")
				mqttLd();
			else if (ld == "mb")
				mbLd();
			else if (ld == "ftp")
				ftpLd();
			else if (ld == "smtp")
				smtpLd();
			else if (ld == "json")
				jsonLd();
			else if (ld == "frm")
				frmLd();
			else if (ld == "log")
				logLd();
			else if (ld == "acc")
				accLd();
			else if (ld == "io0")
				ioLd(0);
			else if (ld == "io1")
				ioLd(1);
			else if (ld == "ioVal0")
				ioValLd(0);
			else if (ld == "ioVal1")
				ioValLd(1);
			else
				sysInfoLd();
		}
		
	</script>
</http>